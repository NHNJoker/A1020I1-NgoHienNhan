<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>#3 Cấu Trúc Lặp</title>
</head>
<body>
<script>
    let check = false;
    let nameEdit = "";
    let name = prompt('Họ và tên :');
    let cmnd;
    let date;
    let email;
    let renDays;
    let soLuong;
    name = name.trim().toLowerCase();
    for (let i = 0; i < name.length; i++) {
        if (name.charAt(i) === " " && name.charAt(i+1) === " ") {
            continue;
        }
        if (i === 0 || name.charAt(i - 1) === " ") {
            nameEdit += name.charAt(i).toUpperCase();
            continue
        }
        nameEdit += name.charAt(i);
    }
    name = nameEdit;
    alert(nameEdit);
    do {
        cmnd = prompt('Số CMND:');
        if (!isNaN(cmnd)) {
            cmnd = Number.parseFloat(cmnd);
        }
        if (!Number.isInteger(cmnd)) {
            alert('ID card is invalid !!! please try again.');
            continue;
        }
        if (cmnd < 100000000 || cmnd > 999999999) {
            alert('ID card is invalid !!! please try again.');
            continue;
        }
        check = true;
    } while (!check);
    check = false;
    do {
        date = prompt('Ngày tháng năm sinh (dd/mm/yyyy):');
        if (date.charAt(2) === '/' && date.charAt(5) === '/') {
            let day = date.substring(0, 2);
            let month = date.substring(3, 5);
            let year = date.substring(6, 10);
            if (!isNaN(day) && !isNaN(month) && !isNaN(year)) {
                day = Number.parseFloat(day);
                month = Number.parseFloat(month);
                year = Number.parseFloat(year);
                if (Number.isInteger(day) && Number.isInteger(month) && Number.isInteger(year)) {
                    if (day < 32 && month < 13 && year > 1950) {
                        check = true;
                    }
                }
            }
        }
        if (!check) {
            alert('Date of birth is invalid !!! please try again.');
        }
    } while (!check);
    check = false;
    do {
        let countAt = 0;
        let countDoc = 0;
        email = prompt('Email:');
        for (let i = 0; i < email.length; i++) {
            if (email.charAt(i) === '@') {
                countAt++;
                for (let j = i + 1; j < email.length; j++) {
                    if (email.charAt(j) === '.') {
                        countDoc++;
                    }
                }
            }
        }
        if (countDoc < 1 || countAt !== 1) {
            alert('Email is invalid !!! please try again.')
        } else {
            check = true;
        }
    } while (!check);
    check = false;
    do {
        renDays = prompt('Số ngày thuê');
        if (!isNaN(renDays)) {
            renDays = Number.parseFloat(renDays);
            if (Number.isInteger(renDays) && renDays > 0) {
                check = true;
            }
        }
        if (!check) {
            alert('Ren Days is invalid !!! please try again.')
        }
    } while (!check);
    check = false;
    do {
        soLuong = prompt('Số lượng đi kèm');
        if (!isNaN(soLuong)) {
            soLuong = Number.parseFloat(soLuong);
            if (Number.isInteger(soLuong) && soLuong > 0) {
                check = true;
            }
        }
        if (!check) {
            alert('Accompanying is invalid !!! please try again.')
        }
    } while (!check);
    check = false;
    let typeOfSevice = prompt('loại dịch vụ (Villa, House, Room):');
    let typeOfRoom = prompt('loại phòng thuê (Vip, Business,  Normal):');
    alert('Full name : ' + name + '\n\ID card : ' + cmnd + '\n\Date of birth : ' + date + '\n\Email : ' + email + '\n\Accompanying : ' + soLuong +
        '\n\Ren days : ' + renDays + '\n\Type service : ' + typeOfSevice + '\n\Type room : ' + typeOfRoom);
</script>
</body>
</html>